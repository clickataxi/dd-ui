/*
 * dd-ui
 * http://clickataxi.github.io/dd-ui/

 * Version: 0.9.4 - 2016-10-04
 * License: MIT
 */angular.module("dd.ui",["dd.ui.arrow-key-nav","dd.ui.busy-element","dd.ui.conversion","dd.ui.core","dd.ui.data-list","dd.ui.datetimepicker","dd.ui.dd-datepicker","dd.ui.dd-datetimepicker","dd.ui.dd-table","dd.ui.dd-timepicker","dd.ui.filter-field-focus","dd.ui.filter-helper","dd.ui.filter-tags","dd.ui.form-actions","dd.ui.form-validation","dd.ui.lookup","dd.ui.validation.phone","dd.ui.validation.sameAs","dd.ui.validation"]),angular.module("dd.ui.arrow-key-nav",[]).directive("ddArrowKeyNav",["$document",function(a){return{restrict:"EA",link:function(b,c,d,e){function f(){var a=h(!0);a&&a.focus()}function g(){var a=h();a&&a.focus()}function h(b){void 0===b&&(b=void 0);var c=j();b&&c.reverse();var d=c?c.indexOf(a[0].activeElement):-1;if(d!==-1){var e=c.slice(d+1).find(i);return e||(e=c.slice(0,d).find(i)),e}}function i(a){return $(a).hasClass(l)}function j(){return $(c).find("*").filter(function(a,b){return k(b)}).toArray()}function k(a){var b=$(a),c=a.nodeName.toLowerCase(),d=b.attr("tabindex");return!a.disabled&&"disabled"!==b.attr("disabled")&&!b.hasClass("disabled")&&(!!/input|select|textarea|button|object/.test(c)||("a"===c||"area"===c?a.href||!isNaN(d):!isNaN(d)))&&!b.is(":hidden")}var l="arrow-key-nav";c.on("keydown",function(a){d.arrowKeyModifier&&!a[d.arrowKeyModifier.toLowerCase()+"Key"]||(38===a.keyCode?(a.preventDefault(),f()):40===a.keyCode&&(a.preventDefault(),g()))})}}}]),angular.module("dd.ui.busy-element",[]).directive("busyElement",["$parse","$timeout","$rootScope",function(a,b,c){return{restrict:"EA",replace:!0,templateUrl:"template/busy-element/busy-element.html",scope:{busy:"=?",status:"=?",timeout:"=?"},link:function(a,c,d){function e(){var b=d.busyElement?angular.element(d.busyElement):c.parent(),e=b.offset();c.offset(e),a.width=b.innerWidth(),a.height=b.innerHeight(),a.marginLeft=b.css("padding-left"),a.marginTop=b.css("padding-top")}e(),a.$watch("status",function(){e(),void 0!==a.status&&(a.busy=!1,a.statusClass=a.status,0!==a.timeout&&b(function(){a.status=null},a.timeout?a.timeout:500))})}}}]),function(){"use strict";angular.module("dd.ui.conversion",[]).filter("localizedDistance",["conversionService",function(a){return function(b,c,d){if("m"===c)return a.isMetric()?b+" m":a.convert(b,"m","yd",d)+" yd";if("km"===c)return a.isMetric()?b+" km":a.convert(b,"km","mi",d)+" mi";throw new Error("Unit "+c+" conversion not supported")}}]).service("conversionService",[function(){function a(){for(var a=0;a<d.length;a++)f[d[a]]={};for(var b=0;b<d.length;b++)for(var c=b;c<d.length;c++){var g;g=0===b?e[c]:d[b]===d[c]?1:f[d[b]][d[0]]*f[d[0]][d[c]],f[d[b]][d[c]]=g,f[d[c]][d[b]]=1/g}}var b=this,c="metric",d=["km","m","cm","mm","nm","mi","yd","ft","in"],e=[1,1e3,1e5,1e6,1e12,.621371192237334,1093.6132983377079,3280.8398950131236,39370.078740157485],f={};a(),b.setUnitSystem=function(a){c=a},b.isMetric=function(){return"metric"===c},b.convert=function(a,b,c,d){var e=a*f[b][c];return angular.isDefined(d)?parseFloat(e.toFixed(d)):e}}])}(),angular.module("dd.ui.core",[]);var ddui;!function(a){var b=function(){function b(a,b){this.$http=b,this.id=a.id,this.rows=[],this.selectedRows=[],this.count=0,this.page=1,this.data=null,this.paging=a.paging,this.selectedAllPages=!1,this.isLoading=!1,this.url=a.url,this.responseListName=a.responseListName||"items",this.responseCountName=a.responseCountName||"count",this.initFilterFunc=function(){return{}},this.filter=this.createDefaultFilter()}return b.prototype.onSuccess=function(a){this.onListResponseSuccess=a},b.prototype.onError=function(a){this.onListResponseError=a},b.prototype.setFilter=function(a){this.initFilterFunc=a;var b=this.initFilterFunc();if("object"!=typeof b)throw new Error("initFilterFunc should return object with filter properties");angular.extend(this.filter,b)},b.prototype.submitFilter=function(){return this.updateList(this.filter)},b.prototype.resetFilter=function(){this.filter=this.createDefaultFilter(),this.initFilterFunc&&this.setFilter(this.initFilterFunc),this.updateList(this.filter)},b.prototype.fetchPage=function(a){void 0===a&&(a=null),a&&(this.page=a),this.filter.skip.value=this.page*this.filter.limit.value-this.filter.limit.value,this.updateList(this.filter)},b.prototype.syncAll=function(){this.filter.skip.value=0,this.filter.limit.value=this.rows.length>0?Math.ceil(this.rows.length/this.filter.limit.value)*this.filter.limit.value:this.filter.limit.value,this.updateList(this.filter)},b.prototype.loadMore=function(){return this.filter.skip.value+=this.filter.limit.value,this.updateList(this.filter)},b.prototype.hasMore=function(){return this.rows&&this.rows.length<this.count},b.prototype.selectAll=function(){this.selectedAllPages=!1;for(var a=0,b=this.rows;a<b.length;a++){var c=b[a];c.$selected=!0,this.selectedRows.push(c)}},b.prototype.deselectAll=function(){this.selectedAllPages=!1;for(var a=0,b=this.rows;a<b.length;a++){var c=b[a];c.$selected=!1,this.selectedRows=[]}},b.prototype.selectAllPages=function(){this.selectAll(),this.selectedAllPages=!0},b.prototype.toggle=function(a){if(this.selectedAllPages=!1,a.$selected=!a.$selected,a.$selected)this.selectedRows.push(a);else{var b=this.selectedRows.indexOf(a);this.selectedRows.splice(b,1)}},b.prototype.updateList=function(b){var c=this;this.isLoading=!0,this.ensureLimitAndSkip();var d={params:a.FilterHelper.generateStateParams(b)};return this.$http.get(this.url,d).then(function(a){c.data=a.data,c.count=c.data[c.responseCountName],c.updateListCollection(c.data[c.responseListName]),c.onListResponseSuccess&&c.onListResponseSuccess(c.rows,c.count)}).catch(function(a){c.onListResponseError&&c.onListResponseError(a)}).finally(function(){c.isLoading=!1})},b.prototype.ensureLimitAndSkip=function(){angular.isDefined(this.filter.limit.value)||(this.filter.limit.value=25),angular.isDefined(this.filter.skip.value)||(this.filter.skip.value=0)},b.prototype.updateListCollection=function(a){if(0===this.filter.skip.value||this.paging)this.rows=a;else for(var b=0;b<a.length;b++)this.rows.push(a[b])},b.prototype.createDefaultFilter=function(){return{skip:{value:0},limit:{value:25}}},b}();a.DataList=b;var c=function(){function a(a){this.$http=a,this.listServiceHash={},this.defaultListId="DataList"}return a.prototype.init=function(a){a.id=a.id||this.defaultListId,this.validateInit(a);var c=new b(a,this.$http);return this.listServiceHash[a.id]=c,c},a.prototype.get=function(a){return a=a||this.defaultListId,this.validateGet(a),this.listServiceHash[a]},a.prototype.validateInit=function(a){if(!a||!a.url)throw new Error("List config url is required");if(this.listServiceHash[a.id])throw new Error("List with id "+a.id+" is already created")},a.prototype.validateGet=function(a){if(!this.listServiceHash[a])throw new Error("List with id "+a+" not found")},a}();a.DataListManager=c,angular.module("dd.ui.data-list",[]).service("dataListManager",["$http",function(a){return new c(a)}])}(ddui||(ddui={})),angular.module("dd.ui.datetimepicker",["ui.bootstrap"]).directive("datetimepicker",["$document",function(a){return{restrict:"EA",require:"ngModel",templateUrl:function(a,b){return b.templateUrl||"template/datetimepicker/datetimepicker.html"},scope:{ngModel:"=",minuteStep:"=?",showSpinners:"=?",showMeridian:"=?",ngDisabled:"=?",dateDisabled:"&",popupPlacement:"@?"},link:function(b,c,d,e){var f=!0,g=c.children().eq(0).children()[0];e.$viewChangeListeners.push(function(){b.$eval(d.ngChange)}),b.$watch("ngModel",function(c){if(!g.contains(a[0].activeElement)){if(!c){if(!f)return;c=new Date,c.setHours(0,0,0,0)}c=new Date(c),b.time=c,f&&(b.ngModel||(b.ngModel=new Date(c)),f=!1)}},!0),b.dateChange=function(){var a=b.time;b.ngModel&&(b.ngModel.setHours(a.getHours(),a.getMinutes(),0,0),e.$setViewValue(b.ngModel))},b.timeChange=function(){if(b.ngModel&&b.time){b.ngModel instanceof Date||(b.ngModel=new Date(b.ngModel));var a=new Date(b.ngModel);a.setHours(b.time.getHours(),b.time.getMinutes(),0,0),e.$setViewValue(a)}},b.open=function(a){a.preventDefault(),a.stopPropagation(),b.opened=!0},function(){void 0===b.minuteStep&&(b.minuteStep=1),void 0===b.showSpinners&&(b.showSpinners=!0)}()}}}]),function(){"use strict";function a(a,b,c,g,h){var i={restrict:"EA",require:"ngModel",replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/dd-datepicker/dd-datepicker.html"},scope:{ngModel:"=",minuteStep:"=?",showSpinners:"=?",showMeridian:"=?",ngDisabled:"=?",ngRequired:"=?",dateDisabled:"&",showDayName:"=?",placeholder:"@?",popupPlacement:"@?"},link:function(i,j,k,l){function m(a){l.$modelValue=a,u(),w(),t()}function n(){var a=x.val();return!(!i.ngModel&&!a)&&(!i.ngModel||!a||b(i.ngModel,i.dateFormat)!==a)}function o(){if(i.bootstrapDateModel){var a=c.validateWithDisabledDate(i.bootstrapDateModel,i.dateDisabled);v(a),y&&u(),t()}else v(null),u()}function p(){var a=c.parse(i.displayModel,i.dateFormat,i.dateDisabled,l.$modelValue);r(a)}function q(b){var d=i.displayModel?c.parse(i.displayModel,i.dateFormat,i.dateDisabled,l.$modelValue):new Date;c.changeDate(d,b);var e=c.validateWithDisabledDate(d,i.dateDisabled);r(e),a(u,0)}function r(a){!angular.isUndefined(a)&&null!==a&&isNaN(a.getDate())&&(a=null),v(a),t()}function s(a){a.preventDefault(),a.stopPropagation(),i.calendarOpened=!0}function t(){i.bootstrapDateModel=angular.copy(l.$modelValue)}function u(){y=!0,i.displayModel=l.$modelValue?b(l.$modelValue,i.dateFormat):null}function v(b){z=!1,l.$setViewValue(b),l.$render(),w(),a(function(){z=!0},100)}function w(){i.showDayName&&(l.$modelValue?i.dayName=g[l.$modelValue.getDay()]:i.dayName=null)}var x=angular.element(j.find(".display-input")),y=!0,z=!0;i.dayName=null,i.dateFormat=k.dateFormat||h.dateFormat,i.dateOptions=k.dateOptions||angular.copy(h.dateOptions),i.useShortDateFormat=i.dateFormat.length<6,i.dateOptions.dateDisabled=i.dateDisabled,i.calendarOpened=!1,i.openCalendar=s,i.name=k.name,l.$formatters.push(function(a){return m(a),a}),i.$watch("calendarOpened",function(a,b){!a&&b&&(o(),x.focus())}),i.$on("ddDatepicker:sync",function(a,b){i.ngModel=b.model}),i.$on("ddDatepicker:setDate",function(b,d){var e=c.validateWithDisabledDate(d.date,i.dateDisabled);r(e),a(u,0)}),x.on("blur",function(){n()&&(p(),u())}),x.on("keydown keypress",function(a){a.altKey||(a.which!==d||i.displayModel?a.which===e?(q(1),a.preventDefault()):a.which===f&&(q(-1),a.preventDefault()):(q(0),a.preventDefault()))})}};return i}function b(a){function b(a,b,c,f){var g=e(a,b);return g?(c&&(g=d(g,c)),f&&g&&g.setHours(f.getHours(),f.getMinutes(),0,0),g||null):null}function c(a,b){if(a){var c=a.getDate()+b;a.setDate(c)}}function d(a,b){var c=b({date:a,mode:"day"});return c?null:a}function e(b,c){var d=k.test(c);return d||(b=g(b)),j.test(b)?f(b):a.parse(b,c)}function f(a){var b=h(a),c=(new Date).getFullYear(),d=parseInt(b[1],10)-1,e=parseInt(b[2],10);return new Date(c,d,e)}function g(a){return a.replace(l,"$2-$1")}function h(a){return j.exec(a)}var i=this,j=/^(0?[1-9]|1[012])[-\/\s.]?(0?[1-9]|[12][0-9]|3[01])$/,k=/(MM?)[-\/\s.](dd?)/,l=/^(\d\d?)[-\/\s.]?(\d\d?)$/;i.parse=b,i.changeDate=c,i.validateWithDisabledDate=d}function c(){var a={dateFormat:"yyyy-MM-dd",dateOptions:{startingDay:1}};this.setDateFormat=function(b){a.dateFormat=b},this.setDateOptions=function(b){a.dateOptions=b},this.$get=function(){return a}}angular.module("dd.ui.dd-datepicker",["ui.bootstrap"]).constant("days",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]).directive("ddDatepicker",a).service("datepickerParserService",b).provider("datepickerConfig",c);var d=13,e=38,f=40;a.$inject=["$timeout","dateFilter","datepickerParserService","days","datepickerConfig"],b.$inject=["uibDateParser"]}(),angular.module("dd.ui.dd-datetimepicker",["ui.bootstrap"]).directive("ddDatetimepicker",["$timeout",function(a){return{restrict:"EA",require:"ngModel",templateUrl:function(a,b){return b.templateUrl||"template/dd-datetimepicker/dd-datetimepicker.html"},scope:{ngModel:"=",minuteStep:"=?",showMeridian:"=?",ngRequired:"=?",ngDisabled:"=?",datepickerDisabled:"=?",dateDisabled:"&",dateFormat:"@",showDayName:"=?",allowForwardDateAdjustment:"=?",datePlaceholder:"@?",timePlaceholder:"@?",popupPlacement:"@?"},link:function(b,c,d,e){function f(){h();var a=angular.copy(b.date);a&&b.time&&a.setHours(b.time.getHours(),b.time.getMinutes(),0,0),e.$setViewValue(a)}function g(a){e.$modelValue=a,b.time=e.$modelValue,b.date=e.$modelValue}function h(){!b.date||b.date instanceof Date||(b.date=new Date(b.date)),!b.time||b.time instanceof Date||(b.time=new Date(b.time))}function i(){!b.ngRequired||b.time&&b.date?e.$setValidity("required",!0):e.$setValidity("required",!1)}function j(a,c){if(a&&c&&b.ngModel&&!n){a=new Date(a),c=new Date(c);var d=a.getHours()-c.getHours();d===-23?k(1):23===d&&k(-1)}}function k(a){var c=new Date(b.ngModel.getTime()),d=c.getDate()+a;c.setDate(d),b.$broadcast("ddDatepicker:setDate",{date:c}),l()}function l(){var b=c.find(".datepicker-container .display-input");b.css("background-color","rgba(0, 128, 0, 0.15)"),a(function(){b.css("background-color","")},500)}var m=!1,n=!1;b.time=null,b.date=null,b.name=d.name,e.$formatters.push(function(a){return g(a),a}),b.$watch("date",function(a,c){b.ngModel!==a&&(f(),i())}),b.$watch("time",function(a,c){b.ngModel!==a&&(m=!0,f(),i(),j(a,c),n=!1)}),b.onTimeBlur=function(){n=!0}}}}]);var ddui;!function(a){function b(){return{restrict:"A",scope:{ddTable:"="},bindToController:!0,controllerAs:"$ctrl",controller:function(){},compile:function(a,b){return a[0].classList.add("table"),a[0].classList.add("dd-table"),function(){}}}}function c(){return{restrict:"E",scope:{totalItems:"=",currentPage:"=",limit:"=",onChange:"&"},template:'<ul uib-pagination\n                           total-items="totalItems" \n                           ng-model="currentPage"\n                           max-size="4"\n                           items-per-page="limit" \n                           class="dd-pagination pagination-sm" \n                           boundary-link-numbers="true">\n                        </ul>',link:function(a){a.$watch("currentPage",function(b,c){b!==c&&a.onChange()})}}}function d(){return{restrict:"E",scope:{limit:"=",onChange:"&"},template:'<div class="btn-group pull-right dropup" uib-dropdown keyboard-nav>\n                            <button type="button" class="btn btn-default btn-sm" uib-dropdown-toggle>\n                                Show {{limit}} results <span class="caret"></span>\n                            </button>\n                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-single-button">\n                                <li ng-repeat="value in values" role="menuitem"><a href ng-click="selectValue(value)">{{value}}</a></li>\n                            </ul>\n                        </div>',link:function(a){a.values=[a.limit||25,50,100],a.selectValue=function(b){a.limit=b},a.$watch("limit",function(b,c){b!==c&&a.onChange()})}}}function e(){return{restrict:"E",require:"^ddTable",transclude:!0,replace:!0,controller:function(){},template:'<div>\n                            <div class="btn-group" uib-dropdown keyboard-nav>\n                                <button uib-dropdown-toggle class="btn btn-default btn-xs"><span class="caret"></span></button>\n                                <ul class="dropdown-menu" uib-dropdown-menu ng-transclude>\n                                </ul>\n                            </div>\n                            <span ng-if="ddTable.selectedRows.length > 0" class="rows-count">{{ddTable.selectedRows.length}}</span>\n                       </div>',link:function(a,b,c,d){a.ddTable=d.ddTable}}}function f(){return{restrict:"E",require:"^ddPagesSelector",transclude:!0,replace:!0,scope:{onClick:"&"},template:'<li><a href="#" ng-click="onClick()" ng-transclude></a></li>'}}angular.module("dd.ui.dd-table",[]).directive("ddTable",b).directive("ddPagination",c).directive("ddItemsPerPage",d).directive("ddPagesSelector",e).directive("ddPagesSelectorItem",f)}(ddui||(ddui={})),function(){"use strict";function a(a,b){var f={restrict:"A",require:"ngModel",replace:!0,scope:{ngModel:"=",onChange:"&",minuteStep:"=?",isDateType:"=?"},link:function(f,g,h,i){function j(a){i.$setViewValue(a),i.$render()}function k(a,c,d){void 0===d&&(d=void 0),o=p=!0,j(d||b.changeTime(f.ngModel,c)),a.preventDefault()}function l(){return i.$viewValue!==b.toView(f.ngModel)}function m(){f.onChange&&a(f.onChange)}var n=f.isDateType&&f.ngModel instanceof Date?f.ngModel:new Date,o=!1,p=!1;f.minuteStep=f.minuteStep||1,i.$parsers.push(function(a){return a=o?b.toModel(a,f.isDateType,n):f.ngModel,o=!1,a||null}),i.$formatters.push(function(a){return o=!1,b.toView(a)}),g.on("keydown keypress",function(a){a.altKey||(a.which!==c||i.$viewValue?a.which===d?k(a,f.minuteStep):a.which===e&&k(a,-f.minuteStep):k(a,0,b.getFormattedTime()))}),g.on("blur",function(){l()&&(o=!0,f.ngModel=b.toModel(i.$viewValue,f.isDateType,n),j(b.toView(f.ngModel)),m()),p&&(p=!1,m())})}};return f}function b(a){function b(a,b,c){var d=null;return a?r.test(a)?(d=i(a),f(d,b,c)):(a=m(a),q.test(a)?(d=g(a,q),f(d,b,c)):s.test(a)?(d=h(a),f(d,b,c)):null):null}function c(a){return a instanceof Date?e(a):a}function d(b,c){var d=k(m(b)),e=new Date;return e.setHours(d.hours),e.setMinutes(d.minutes+c),a(e,"HH:mm")}function e(b){var c=b||new Date;return a(c,"HH:mm")}function f(a,b,c){if(!a)return null;if(b){var d=a.split(":");return c.setHours(parseInt(d[0],10)),c.setMinutes(parseInt(d[1],10)),new Date(c)}return a}function g(a,b){var c=j(a,b),d=k(c[1],c[2]);return l(o(d))}function h(a){var b=k(a,null);return l(o(b))}function i(a){a=m(a);var b=k(a,null);return o(b)}function j(a,b){return b.exec(a)}function k(a,b){void 0===b&&(b=void 0),a=a.replace(/^0/,"");var c=parseInt(a,10),d=0,e=0;return"0"===a[0]?e=parseInt(a,10):c<=24&&a.length<=2?d=c:c>24&&c<=999?(d=parseInt(a[0],10),e=parseInt(a.substr(1,3),10)):c>24&&c<=9999&&(d=parseInt(a.substr(0,2),10),e=parseInt(a.substr(2,4),10)),"p"===b&&12!==d?d+=12:"a"===b&&12===d&&(d=0),{hours:d,minutes:e}}function l(a){return r.test(a)?a:null}function m(b){return b instanceof Date&&(b=a(b,"HH:mm")),b||(b="00:00"),b.trim().toLowerCase().replace(".","").replace(":","")}function n(a){return a<10?"0"+a:a.toString()}function o(a){return n(a.hours)+":"+n(a.minutes)}var p=this,q=/^(\d+)(a|p)$/,r=/^([0-9]|0[0-9]|1[0-9]|2[0-3])[.:][0-5][0-9]$/,s=/^[0-9]+$/;p.toModel=b,p.toView=c,p.changeTime=d,p.getFormattedTime=e}angular.module("dd.ui.dd-timepicker",[]).directive("ddTimepicker",a).service("timeparserService",b);var c=13,d=38,e=40;a.$inject=["$timeout","timeparserService"],b.$inject=["dateFilter"]}();var ddui;!function(a){function b(){return{restrict:"A",link:function(a,b,c){function d(a){var b,c="input,select,textarea",d=document.getElementById(a);b=c.indexOf(d.tagName.toLowerCase())>-1?angular.element(d):d.querySelector("input,select,textarea"),b&&angular.element(b).focus()}a.$watch(function(){return c.filterFieldFocus},function(a,b){b&&d(b)})}}}angular.module("dd.ui.filter-field-focus",[]).directive("filterFieldFocus",b)}(ddui||(ddui={}));var ddui;!function(a){var b=function(){function a(){}return a.mergeStateParams=function(a,b){for(var c in a)a.hasOwnProperty(c)&&"undefined"!=typeof b[c]&&(a[c].value=b[c])},a.generateStateParams=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c].value);return b},a.generateDynamicParams=function(a,b){void 0===b&&(b=null);var c=b||{};for(var d in a)a.hasOwnProperty(d)&&(c[d]={dynamic:!0});return c},a.generateUrlParams=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length>0&&(b+="&"),b+=c);return b},a}();a.FilterHelper=b,angular.module("dd.ui.filter-helper",[])}(ddui||(ddui={}));var ddui;!function(a){var b=function(){function a(){}return a.prototype.$onChanges=function(a){if(this.tags=[],a.filter){var b=a.filter.currentValue;b&&this.createFilterTags(b)}},a.prototype.openTag=function(a){this.onSelect({fieldName:a.id})},a.prototype.removeTag=function(a){this.onRemove({fieldName:a.id});var b=this.tags.indexOf(a);this.tags.splice(b,1)},a.prototype.clearAll=function(){this.onRemoveAll(),this.tags=[]},a.prototype.createFilterTags=function(a){for(var b=Object.keys(a).filter(function(b){var c=a[b].value;return angular.isDefined(c)&&""!==c&&!a[b].excludeTag}),c=0,d=b;c<d.length;c++){var e=d[c],f=a[e];this.tags.push({id:e,name:this.createTagName(e,f.displayName),value:a[e].value})}},a.prototype.createTagName=function(a,b){if(b)return b;var c=a.split(/(?=[A-Z])/).map(function(a){return a.toLocaleLowerCase()}),d=c[0];return c[0]=d.charAt(0).toLocaleUpperCase()+d.slice(1,d.length),c.join(" ")},a}(),c={templateUrl:["$element","$attrs",function(a,b){return b.templateUrl||"template/filter-tags/filter-tags.html"}],controller:b,bindings:{filter:"<",onSelect:"&",onRemove:"&",onRemoveAll:"&"}};angular.module("dd.ui.filter-tags",[]).component("filterTags",c)}(ddui||(ddui={})),function(){"use strict";function a(){return{require:"^form",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/form-actions/form-actions.html"},link:function(a,b,c,d){if(a.form=d,c.absolute){var e=b[0].querySelector(".form-actions-bar");e.style.position="absolute"}if(c.parentContainer){var f=angular.element(document.querySelector(c.parentContainer));a.$watch("form.$dirty",function(a){a?f.addClass("form-actions-visible"):f.removeClass("form-actions-visible")})}},restrict:"E"}}angular.module("dd.ui.form-actions",[]).directive("formActions",a)}(),function(){"use strict";function a(a){var b=function(b,c,d,e){var f,g,h,i;a(function(){function j(a){c.toggleClass("has-error",a)}function k(){if(f=!1,g=angular.element(m(c[0])),h=angular.element(c[0].querySelector("[ng-model][name]")),i=h?h.controller("ngModel"):null,!i)throw new Error("show-errors input control element should have [ng-model] and [name]");g&&g.bind("blur",function(){return f=!0,j(i.$invalid)}),b.$watch(function(){return i&&i.$invalid},function(a){if(f)return j(a)}),b.$on(e.$name+"-show-errors-check-validity",function(){return j(i.$invalid)}),b.$on(e.$name+"-show-errors-reset",function(){return a(function(){return c.removeClass("has-error"),f=!1},0,!1)})}function l(){b.$watch(function(){return d.showErrors},function(a){if(angular.isDefined(a)){var c=b.$eval(a);return j(c)}})}function m(a){return a.querySelector("input, textarea, select")}d.custom?l():k()})};return{restrict:"A",require:"^form",priority:-100,compile:function(a,c){return a.hasClass("form-fields-group")||a.addClass("form-fields-group"),b}}}function b(a){this.showErrors=function(b){a.$broadcast(b+"-show-errors-check-validity")},this.hideErrors=function(b){a.$broadcast(b+"-show-errors-reset")}}angular.module("dd.ui.form-validation",[]).directive("showErrors",a).service("formValidationService",b),a.$inject=["$timeout"],b.$inject=["$rootScope"]}(),angular.module("dd.ui.lookup",["ui.bootstrap"]).directive("ddLookup",["$http","$timeout","$q",function(a,b,c){return{restrict:"EA",require:"ngModel",scope:{ngModel:"=",url:"=?",lookupParams:"=?",lookupFormat:"&",ngDisabled:"=?",placeholder:"@?",lookupOnSelect:"&",lookupOnClear:"&",lookupResponseTransform:"&",lookupDataProvider:"&",lookupGrouping:"=?",lookupMinLength:"=?",lookupFocusFirst:"=?"},templateUrl:function(a,b){return b.templateUrl||"template/lookup/lookup.html"},link:function(d,e,f,g){function h(a){var b=d.lookupGrouping||"group",c=a?a.reduce(function(a,c){return c.lookupGroup=c[b]||"Other",a[c.lookupGroup]||(a[c.lookupGroup]=[],c.firstInGroup=!0),a[c.lookupGroup].push(c),a},{}):null,e=[];for(var f in c)({}).hasOwnProperty.call(c,f)&&(e=e.concat(c[f]));return e}function i(b){var c=d.lookupParams||{};return c.query=b,angular.isUndefined(c.limit)&&(c.limit=10),a({method:"GET",url:d.url,params:c})}d.isBusy=!1;var j=e.find("input");if(j.on("blur",function(){d.noResults=!1}),d.$watch("ngModel",function(a,c){!a&&c&&(d.noResults=!1,b(d.lookupOnClear))}),d.inputClass=f.lookupInputClass,f.lookupAddon){var k=angular.element('<span class="input-group-addon"></span>');k.append(angular.element(f.lookupAddon));var l=e.find(".input-group");l.prepend(k);var m=k.outerWidth(),n=e.find(".lookup-no-results");n.css("margin-left",m),b(function(){var a=e.find(".dropdown-menu");a.css("width","calc(100% - "+m+"px)")})}d.getItems=function(a){var b=null;return d.url?b=i(a).then(function(a){return a.data}):d.lookupDataProvider&&(b=c.when(d.lookupDataProvider({$query:a}))),b?(d.isBusy=!0,b.then(function(a){return d.isBusy=!1,g.$setDirty(!0),f.lookupResponseTransform&&(a=d.lookupResponseTransform({$response:a})),f.lookupGrouping&&(a=h(a)),a},function(){d.isBusy=!1})):null},d.clear=function(){d.ngDisabled||(d.ngModel=null,e.find("input").val(""),g.$setDirty(!0))},d.getLabel=function(a){if(!a)return null;var b;return b=f.lookupFormat?d.lookupFormat({$item:a}):a.name},d.onSelect=function(a,c,e){g.$setDirty(!0),b(d.lookupOnSelect)},d.onKeydown=function(a){if(a.altKey&&(40===a.keyCode||38===a.keyCode)){var b=e.find(".dropdown-menu");if(b){var c=b.scope();c.matches=[]}}}}}}]);var PHONE_REGEXP=/^\+\d{10,14}$/,PHONE_COUNTRY_CODE_REGEXP=/^\+\d{1,3}$/,PHONE_WO_COUNTRY_CODE_REGEXP=/^\d{7,13}$/;angular.module("dd.ui.validation.phone",[]).directive("phone",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){return a||""===a?(""===a||PHONE_REGEXP.test(a)?d.$setValidity("phone",!0):d.$setValidity("phone",!1),a):a}d.$parsers.unshift(e),d.$formatters.unshift(e)}}}).directive("phoneCountryCode",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){return a||""===a?(""===a||PHONE_COUNTRY_CODE_REGEXP.test(a)?d.$setValidity("phoneCountryCode",!0):d.$setValidity("phoneCountryCode",!1),a):a}d.$parsers.unshift(e),d.$formatters.unshift(e)}}}).directive("phoneWoCountryCode",function(){return{require:"ngModel",link:function(a,b,c,d){function e(a){return a||""===a?(""===a||PHONE_WO_COUNTRY_CODE_REGEXP.test(a)?d.$setValidity("phoneWoCountryCode",!0):d.$setValidity("phoneWoCountryCode",!1),a):a}d.$parsers.unshift(e),d.$formatters.unshift(e)}}}),angular.module("dd.ui.validation.sameAs",[]).directive("sameAs",function(){return{require:"ngModel",link:function(a,b,c,d){function e(b){var c=a.sameAs;return c?b===c?(d.$setValidity("sameAs",!0),b):void d.$setValidity("sameAs",!1):b}d.$parsers.unshift(e),d.$formatters.unshift(e),a.$watch("sameAs",function(){e(d.$modelValue)})},scope:{sameAs:"="}}}),angular.module("dd.ui.validation",["dd.ui.validation.phone","dd.ui.validation.sameAs"]),angular.module("dd.ui.dd-datepicker").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css"> .dd-datepicker .calendar-btn-with-day{border-radius:0;border-left:0;}.dd-datepicker .day-name-label{width:90px !important;font-size:12px;}.dd-datepicker input.short{width:70px;}.dd-datepicker input{width:105px;}</style>')}),angular.module("dd.ui.dd-datetimepicker").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.dd-datetimepicker{display:inline-flex;}.dd-datetimepicker .timepicker-container{width:100px !important;}.dd-datetimepicker .timepicker-container input{border-bottom-right-radius:0;border-top-right-radius:0;border-right:0;}.dd-datetimepicker .datepicker-container input.short{width:70px !important;}.dd-datetimepicker .datepicker-container input{width:105px !important;border-bottom-left-radius:0;border-top-left-radius:0;}.has-error .dd-datetimepicker .calendar-btn-with-day{border-color:#a94442;}</style>')}),angular.module("dd.ui.dd-table").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.dd-table > thead:first-child > tr:first-child > th,.dd-table > thead:first-child > tr:first-child > th{border-bottom:0px;}.dd-table > thead > tr > th.checkbox-row{width:55px;}.dd-table > tbody > tr.active:hover > td{background-color:#f5f5f5;}.dd-table thead .rows-count{font-size:11px;color:#aaa;font-weight:normal;}.dd-table > tbody > tr > td{background:#fff;}.dd-table > tbody > tr:hover{background-color:#fff;}.dd-pagination{margin-top:0px !important;}.dd-table > tbody > tr > td{max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}</style>')}),angular.module("dd.ui.filter-tags").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css"> .filter-tags{margin:15px 15px 0 15px;}.filter-tags .btn-group{margin-right:10px;}</style>')}),angular.module("dd.ui.form-actions").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">@keyframes formBarMoveIn{from{bottom:-100px;}to{bottom:0;}}@keyframes formBarMoveOut{from{bottom:0;}to{bottom:-100px;}}.form-actions-bar{position:fixed;left:0;bottom:0;background:#eee;border-top:1px solid #ddd;width:100%;padding:10px 5px;z-index:9999;animation:formBarMoveIn 0.3s ease-out;}.form-actions-bar.ng-hide{animation:formBarMoveOut 0.3s ease-out;}.form-actions-bar button{margin-right:10px;}</style>')}),angular.module("dd.ui.form-validation").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.form-fields-group .field-error{display:none;margin-top:5px;margin-bottom:10px;color:#a94442}.form-fields-group.has-error .field-error{display:block;}</style>')}),angular.module("dd.ui.lookup").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.lookup-container .input-group{width:100%;}.lookup-container .dropdown-menu{border:1px solid #ccc !important;border-top:none !important;font-size:11px;padding:1px !important;max-height:196px;overflow-y:scroll;overflow-x:hidden;width:100%;}.lookup-container input{background-color:#ffe;}.lookup-container .dropdown-menu > li > a{padding:5px;}.lookup-container .lookup-legend div,.lookup-clear div{width:16px;height:16px;display:inline-block;vertical-align:middle;}.lookup-container a.lookup-clear{outline:0}.lookup-container .lookup-no-results{position:absolute;background-color:#fff;z-index:100;padding:4px;width:100%;border:1px solid #ddd;margin-top:1px;top:100%;}.lookup-container .lookup-no-results span{color:#a94442;font-size:10px;}.lookup-container .lookup-legend .lookup-icon{background-image:url(./assets/img/magnifier-small.png);}.lookup-container .lookup-legend .spinner-icon{background-image:url(./assets/img/spinner.gif);background-size:16px;}.lookup-container .lookup-clear .clear-icon{background-image:url(./assets/img/cross-small-white.png);opacity:0.6;}.lookup-container .lookup-legend{position:absolute;right:6px;top:6px;z-index:5;}.lookup-container .lookup-clear{position:absolute;right:22px;top:6px;z-index:5;}.lookup-container .typeahead-group-header{font-weight:bold;padding:.2em .4em;}</style>')});